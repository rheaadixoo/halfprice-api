<html>

<head>
    <title>Homefitt Checkout</title>
        
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<!-- this meta viewport is required for BOLT //-->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" >
<!-- BOLT Sandbox/test //-->
<script id="bolt" src="https://sboxcheckout-static.citruspay.com/bolt/run/bolt.min.js" bolt-
color="e34524" bolt-logo="http://boltiswatching.com/wp-content/uploads/2015/09/Bolt-Logo-e14421724859591.png"></script>

</head>

<body>
    <center>
        <h1>Please do not refresh this page...</h1>
    </center>
    <form method="post" action="{{action}}" name="pg">
        <table border="1">
            <tbody>
				{{#if paytm}}
                <input type="hidden" name="mid" value="{{mid}}">
                <input type="hidden" name="orderId" value="{{orderId}}">
                <input type="hidden" name="txnToken" value="{{txnToken}}">
				{{/if}}
				{{#if payU}}
                <input type="hidden" id="hash" name="hash" value="{{hash}}">
                <input type="hidden" id="surl" name="surl" value="{{surl}}">
                <input type="hidden" id="furl" name="furl" value="{{furl}}">
                <input type="hidden" id="key" name="key" value="{{key}}">
                <input type="hidden" id="salt"  name="salt" value="{{salt}}">
                <input type="hidden" id="txnid" name="txnid" value="{{orderNumber}}">
                <input type="hidden" id="amount" name="amount" value="{{amount}}">
                <input type="hidden" id="pinfo" name="productinfo" value="{{orderNumber}}">
                {{!-- <input type="hidden" name="service_provider" value="payu_paisa"> --}}
                <input type="hidden" id="fname" name="firstname" value="{{name}}">
                <input type="hidden" id="email" name="email" value="{{email}}">
                <input type="hidden" id="phone" name="phone" value="{{number}}">
                {{!-- <input type="hidden" id="udf5" name="udf5" value="{{udf5}}"> --}}
				{{/if}}
            </tbody>
        </table>
   {{!-- <input type="button" value="Pay" onclick="launchBOLT(); return false;"/> --}}
   {{!-- <input type="submit" value="Pay" /> --}}


    </form>
</body>
        <script type="text/javascript"> document.pg.submit(); </script>
<script type="text/javascript">
function launchBOLT()
{
	bolt.launch({
	key: $('#key').val(),
	txnid: $('#txnid').val(), 
	hash: $('#hash').val(),
	amount: $('#amount').val(),
	firstname: $('#fname').val(),
	email: $('#email').val(),
	phone: $('#phone').val(),
	productinfo: $('#pinfo').val(),
	udf5: $('#udf5').val(),
	surl : $('#surl').val(),
	furl: $('#surl').val()
},{ responseHandler: function(BOLT){
	console.log( BOLT.response.txnStatus );		
	if(BOLT.response.txnStatus != 'CANCEL')
	{
		//Salt is passd here for demo purpose only. For practical use keep salt at server side only.
		var fr = '<form action=\"'+$('#surl').val()+'\" method=\"post\">' +
		'<input type=\"hidden\" name=\"key\" value=\"'+BOLT.response.key+'\" />' +
		'<input type=\"hidden\" name=\"salt\" value=\"'+$('#salt').val()+'\" />' +
		'<input type=\"hidden\" name=\"txnid\" value=\"'+BOLT.response.txnid+'\" />' +
		'<input type=\"hidden\" name=\"amount\" value=\"'+BOLT.response.amount+'\" />' +
		'<input type=\"hidden\" name=\"productinfo\" value=\"'+BOLT.response.productinfo+'\" />' +
		'<input type=\"hidden\" name=\"firstname\" value=\"'+BOLT.response.firstname+'\" />' +
		'<input type=\"hidden\" name=\"email\" value=\"'+BOLT.response.email+'\" />' +
		'<input type=\"hidden\" name=\"udf5\" value=\"'+BOLT.response.udf5+'\" />' +
		'<input type=\"hidden\" name=\"mihpayid\" value=\"'+BOLT.response.mihpayid+'\" />' +
		'<input type=\"hidden\" name=\"status\" value=\"'+BOLT.response.status+'\" />' +
		'<input type=\"hidden\" name=\"hash\" value=\"'+BOLT.response.hash+'\" />' +
		'</form>';
		var form = jQuery(fr);
		jQuery('body').append(form);								
		form.submit();
	}
},
	catchException: function(BOLT){
		alert(JSON.stringify(BOLT))
 		alert( BOLT.message );
	}
});
}
//--
</script>
</body>

</html>